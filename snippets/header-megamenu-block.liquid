<nav x-on:mouseleave="$store.xHeaderMenu.hideMenu()" class="[grid-area:navigation] pb-header{% if logo_above %} lg:[grid-area:navigation] mt-4{% else %}{% unless logo_center %} lg:[grid-area:auto]{% endunless %}{% endif %} order-3 hidden header__inline-menu lg:flex items-center{% if section.settings.logo_position == 'left-center' or section.settings.logo_position == "above-center" %} justify-center{% endif %}"
>
  <ul class="list-menu inline-flex flex-wrap items-center">
    {%- if section.blocks == blank -%}
      {%- if section.settings.menu != blank -%}
        {%- for link in section.settings.menu.links -%}
          {%- liquid
            assign is_link = false
            if link.links != blank
              assign is_link = true
            endif
          -%}
          <li x-data='{ active: false }' 
            class="{% if logo_center %} mr-3{% else %} pl-3{% endif %} pr-3 pb-1 pt-1{% if is_link %} has-dropdown{% endif %}"
            x-on:mouseover="$store.xHeaderMenu.selectItem($el); $el.classList.add('is-focus');" 
            @mouseleave="$el.classList.remove('is-focus');"
            @focusin="$store.xHeaderMenu.selectItem($el); $el.classList.add('is-focus');"
            @focusout="$el.classList.remove('is-focus');"
          >
            <a
              href="{{ link.url }}"
              class="relative p-break-words flex items-center pt-1 pb-1 hover-text-link is-focus:link-active{% if is_link %} pr-5{% endif %}{% if link.current or link.child_active %} flex link-active{% endif %}"
              {% if is_link %}x-init="$store.xHeaderMenu.isTouch && $store.xHeaderMenu.touchItem($el)"{% endif %}
            >
              <span>{{ link.title | escape }}</span>
              {%- if is_link -%}
                <span class="z-10 w-3 h-3 rounded-full block absolute right-0">
                  {% render 'icon-alls', icon: 'icon-caret' %}
                </span>
              {% endif %}
            </a>
            {%- if is_link -%} 
              <div class="toggle-menu max-h-0 transition-all pl-5 pr-5 2xl:pl-0 2xl:pr-0 duration-300 delay-150 ease-in-out is-focus:text-[rgba(var(--colors-text))] absolute w-full background-header left-0 z-50 shadow-md opacity-0 overflow-hidden">
                <ul class="flex-wrap relative mx-auto page-width gap-8 flex pt-8 pb-5 flex-row z-50 left-0 right-0 top-full">
                  {%- for childlink in link.links -%}
                    <li class="relative w-[13rem]">
                      <a href="{{ childlink.url }}" class="nav-link relative p-break-words pt-2 hover-text-link{% if childlink.current or childlink.child_active %} flex effect-inline{% else %} inline-block{% endif %}">
                        {{ childlink.title | escape }}
                      </a>
                      {%- if childlink.links != blank -%}
                        <ul class="pt-3 pb-3" role="list">
                          {%- for grandchildlink in childlink.links -%}
                            <li class="relative pt-2 pb-2">
                              <div class="sub-menu z-10 relative{% if grandchildlink.current %} border-b{% endif %}">
                                <a href="{{ grandchildlink.url }}" class="nav-link relative p-break-words hover-text-link font-normal{% if grandchildlink.current %} flex effect-inline{% else %} inline-block{% endif %}">
                                  {{ grandchildlink.title | escape }}
                                </a>
                              </div>
                            </li>
                          {%- endfor -%}
                        </ul>
                      {%- endif -%}
                    </li>
                  {%- endfor -%}
                </ul>
              </div>
            {% endif %}
          </li>
        {%- endfor -%}
      {%- endif -%}
    {%- else -%}
      {%- for block in section.blocks -%}
        {%- case block.type -%}
          {%- when 'tabbed_menu' -%}
            {%- if block.settings.heading != blank -%}
              {%- liquid
                assign link = false
                assign is_link = false
                if block.settings.menu_item_link
                  assign link = block.settings.menu_item_link
                endif
                if block.settings.menu.links != blank
                  assign is_link = true
                endif 
              -%} 
              <li x-data='{ active: false }' 
                class="tabbed_menu pr-5{% if logo_center %} mr-5{% else %} pl-5{% endif %}{% if is_link %} has-dropdown{% endif %}" 
                x-on:mouseover="$store.xHeaderMenu.selectItem($el); $el.classList.add('is-focus');"
                @mouseleave="$el.classList.remove('is-focus');"
                @focusin="$store.xHeaderMenu.selectItem($el); $el.classList.add('is-focus');"
                @focusout="$el.classList.remove('is-focus');">
                <div class="tabbed_menu_item relative">
                  <a href="{% if link %}{{ link }}{% else %}#{% endif %}"{% if block.settings.open_new_window and link %} target="_blank"{% endif %}
                    class="cursor-pointer flex items-center p-break-words justify-center pt-1 pb-1 duration-200 hover-text-link transition is-focus:link-active{% if request.path == link %} link-active{% endif %}" 
                    :class="active && 'link-active'"
                    {% if is_link %}x-init="$store.xHeaderMenu.isTouch && $store.xHeaderMenu.touchItem($el)"{% endif %}
                  >
                    <span>{{ block.settings.heading }}</span>
                    {%- if is_link -%}
                      <span class="w-5 pl-2">{% render 'icon-alls', icon: 'icon-caret' %}</span>
                    {%- endif -%}
                  </a>
                  {%- if block.settings.label != blank -%}
                    {%- style -%}
                      .color-label-{{ block.id }} {
                        background: {{ block.settings.label_color }};
                        color: {{ block.settings.label_text_color_light }}
                      }
                      .color-label-{{ block.id }}:before{
                        border-top-color: {{ block.settings.label_color }}; 
                      }
                      .dark .color-label-{{ block.id }} {
                        background: {{ block.settings.label_color_dark }};
                        color: {{ block.settings.label_text_color_dark }}
                      }
                      .dark .color-label-{{ block.id }}:before {
                        border-top-color: {{ block.settings.label_color_dark }};
                      }
                    {%- endstyle -%}    
                    <div class="color-label-{{ block.id }} flex items-center absolute -right-1.5 bottom-[85%] rounded-sm shadow-md pl-2 pr-2 pt-0.5 pb-0.5 text-[10px] before:absolute before:w-0 before:h-0 before:border-b-8 before:border-b-transparent before:border-r-transparent before:border-r-8 before:border-t-8 before:-bottom-3.5 before:left-2">
                      {% if block.settings.icon != 'none' %}
                        <span class="w-3 h-3 mr-1">
                          {% if block.settings.custom_icon == blank %}
                            {% render 'icon-labels-bags', icon: block.settings.icon %}
                          {% else %}
                            {{ block.settings.custom_icon }}
                          {% endif %}
                        </span>
                      {%- endif -%}                
                      <span>{{ block.settings.label }}</span>
                    </div>
                  {%- endif -%} 
                </div>
                {%- if is_link -%}
                  {%- liquid 
                    
                    assign image_count = 0
                    if block.settings.image_1 != blank
                      assign image_count = image_count | plus: 1
                    endif
                    if block.settings.image_2 != blank
                      assign image_count = image_count | plus: 1
                    endif
                    if block.settings.image_3 != blank
                      assign image_count = image_count | plus: 1
                    endif
                  -%}
                  <div class="toggle-menu background-header mega-menu-{{ block.settings.tab_style }}{% if image_count > 0 %} main-nav-child-{{ block.settings.promotion_position }}{% endif %} max-h-0 transition-all duration-300 delay-150 ease-in-out is-focus:text-[rgba(var(--colors-text))] absolute w-full background-header left-0 z-50 shadow-md opacity-0 overflow-hidden">
                    <div class="mega-menu-container page-width mx-auto">
                      <div class="mega-nav">
                        <ul class="mega-list-nav items-end flex-wrap pt-12" x-refs="mega_nav"> 
                          {%- for link in block.settings.menu.links -%}
                            <li 
                              class="table{% if link.links != blank %} has-dropdown{% endif %}"
                              x-on:mouseover="$store.xHeaderMenu.selectItem($el, true); $el.classList.add('is-focus-child');"
                              @mouseleave="$el.classList.remove('is-focus-child');"
                              @focusin="$store.xHeaderMenu.selectItem($el, true); $el.classList.add('is-focus-child');"
                              @focusout="$el.classList.remove('is-focus-child');"
                              {%- if link.current or link.child_active %}x-init="active = true;"{% endif %}
                            >
                              <div class="sub-menu flex items-end z-10 relative{% if block.settings.tab_style == 'vertical' %} mb-2 w-[15.6rem] pb-1{% if forloop.first %} pt-3 border-t{% else %} pt-1{% endif %}{% else %} w-[13rem] pt-1.5 pb-1.5{% endif %}">
                                {%- render 'menu-item-image', link: link, show_image_collection: block.settings.show_image_collection, show_first_image_product: block.settings.show_first_image_product, class_ratio: "w-8 h-8 mr-4", image_left: true -%}
                                <span class="flex-1">
                                  <a
                                    href="{{ link.url }}"
                                    class="nav-link p-break-words relative z-10 border-b pb-3 flex items-center{% if link.links != blank %} pr-5{% endif %} hover-text-link is-focus-child:effect-inline{%- if link.current or link.child_active %} flex effect-inline{% if block.settings.tab_style != 'horizontal' %} border-b{% endif %}{% endif %}"
                                    x-init="$store.xHeaderMenu.isTouch && $store.xHeaderMenu.touchItem($el, true)"
                                  >
                                    <span class="p-break-words">{{ link.title | escape }}</span>
                                    {%- if link.links != blank -%}
                                      <span class="z-10 w-5 h-4 pt-1 pb-1 pl-1 pr-1 rounded-full block absolute{% if block.settings.tab_style != 'horizontal' %} -rotate-90 right-1.5{% else %} right-0{% endif %}">
                                        {% render 'icon-alls', icon: 'icon-caret' %}
                                      </span>
                                    {%- endif -%}
                                  </a>
                                </span>
                              </div>
                              {% liquid
                                assign column = 4
                                if link.links.size < 4 and block.settings.tab_style == 'vertical'
                                  assign column = link.links.size  
                                endif
                                assign class_menu = 'w-full grid-cols-' | append: column
                                if image_count > 0
                                  if block.settings.tab_style == 'vertical'
                                    assign class_menu = 'w-3/4 grid-cols-' | append: column
                                  else 
                                    assign class_menu = 'grid-cols-4 w-4/5'
                                  endif 
                                endif
                              %}
                              <div class="toggle-menu-sub left-0 overflow-hidden delay-150 z-0 absolute right-0{% if block.settings.tab_style == 'horizontal' %} pt-6 background-header pb-8{% if image_count < 1 %} top-full{% endif %}{% else %} shadow-md background-header min-h-full top-0 left-0 pl-7 pr-5 pb-7{% endif %}{% if forloop.first %} block{% else %} hidden{% endif %}">   
                                <div class="mega-sub-container relative page-width mx-auto{% if block.settings.tab_style == 'vertical' %} pl-[20rem]{% endif %}">
                                  {%- if link.links != blank -%}
                                    <ul class="mega-sub-nav order-2 grid gap-y-7 gap-x-7 {{ class_menu }} pr-5 pb-8 scrollbar-body scrollbar-visible">
                                      {%- for childlink in link.links -%}
                                        <li class="relative">
                                          <div>
                                            <a href="{{ childlink.url }}" class="nav-link relative transition duration-200 mb-2 p-break-words hover-text-link{% if childlink.current %} flex border-b effect-inline{% else %} inline-block{%- endif -%}">
                                              {{ childlink.title | escape }}
                                            </a>
                                            {%- render 'menu-item-image', link: childlink, show_image_collection: block.settings.show_sub_image_collection, show_first_image_product: block.settings.show_sub_first_image_product, class_ratio: "pb-[56.25%] w-full h-0 mt-1", column: column -%}
                                          </div>
                                          {%- if childlink.links != blank -%}
                                            <ul class="list-unstyled" role="list">
                                              {%- for grandchildlink in childlink.links -%}
                                                <li class="flex items-center pt-1.5 pb-1.5 relative font-normal">
                                                  <span class="flex-1">
                                                    <a href="{{ grandchildlink.url }}" class="nav-link relative transition duration-200 p-break-words hover-text-link{% if grandchildlink.current %} flex effect-inline border-b{% else %} inline-block{% endif %}">
                                                      {{ grandchildlink.title | escape }}
                                                    </a>
                                                  </span>
                                                </li>
                                              {%- endfor -%}
                                            </ul>
                                          {%- endif -%}
                                        </li>
                                      {%- endfor -%}
                                    </ul>
                                  {%- endif -%}
                                  
                                </div>
                              </div>
                            </li>
                          {%- endfor -%}
                        </ul>
                      </div>
                      {%- if image_count > 0 -%}
                        <div class="relative float-right md:right-5 lg:right-0 pt-8 w-1/5"> 
                          <div class="mega-nav-promotions scrollbar-body scrollbar-visible overflow-y-auto">
                            {%- if block.settings.image_1 -%}
                              {% style %}
                                .image-{{ block.id }}-1 {
                                  height: {{ block.settings.image_height_1 }}px;
                                }
                              {% endstyle %}
                              {% assign blockID = block.id | append: "-1" %}
                              <div class="w-full group relative background-color-{{ blockID }}{% if block.settings.promotion_position == 'right' %} ltr{% endif %}{% if settings.edges_type == 'rounded_corners' %} rounded-[10px]{% endif %}">
                                {% render 'promotion-image',
                                  blockID: blockID,
                                  image: block.settings.image_1,
                                  enable_text_overlay: block.settings.enable_text_overlay_1,
                                  heading: block.settings.heading_1,
                                  content: block.settings.text_1,
                                  button_label: block.settings.button_label_1,
                                  button_link: block.settings.button_link_1,
                                  open_new_window: block.settings.open_new_window_button_1,
                                  content_alignment: 'center',
                                  full_width: false,
                                  overlay_opacity: block.settings.overlay_opacity_1,
                                  show_button_primary: block.settings.show_button_primary,
                                  background_color: block.settings.background_color,
                                  color_text: block.settings.color_text,
                                  color_button: block.settings.color_button,
                                  color_text_button: block.settings.color_text_button,
                                  color_button_hover: block.settings.color_button_hover,
                                  color_text_button_hover: block.settings.color_text_button_hover,
                                  color_button_secondary: block.settings.color_button_secondary,
                                  heading_size: block.settings.heading_size_1,
                                  text_size: block.settings.text_size_1,
                                  content_position: block.settings.content_position_1,
                                  columns_desktop: 4,
                                  show_in_header: true
                                %}
                              </div>
                            {%- endif -%} 
                            {%- if block.settings.image_2 -%}
                              {% style %}
                                .image-{{ block.id }}-2 {
                                  height: {{ block.settings.image_height_2 }}px;
                                }
                              {% endstyle %}
                              {% assign blockID = block.id | append: "-2" %}
                              <div class="w-full group relative background-color-{{ blockID }}{% if block.settings.promotion_position == 'right' %} ltr{% endif %}{% if settings.edges_type == 'rounded_corners' %} rounded-[10px]{% endif %}">
                                {% render 'promotion-image',
                                  blockID: blockID,
                                  image: block.settings.image_2,
                                  enable_text_overlay: block.settings.enable_text_overlay_2,
                                  heading: block.settings.heading_2,
                                  content: block.settings.text_2,
                                  button_label: block.settings.button_label_2,
                                  button_link: block.settings.button_link_2,
                                  open_new_window: block.settings.open_new_window_button_2,
                                  content_alignment: 'center',
                                  full_width: false,
                                  overlay_opacity: block.settings.overlay_opacity_2,
                                  show_button_primary: block.settings.show_button_primary_2,
                                  background_color: block.settings.background_color,
                                  color_text: block.settings.color_text,
                                  color_button: block.settings.color_button,
                                  color_text_button: block.settings.color_text_button,
                                  color_button_hover: block.settings.color_button_hover,
                                  color_text_button_hover: block.settings.color_text_button_hover,
                                  color_button_secondary: block.settings.color_button_secondary,
                                  heading_size: block.settings.heading_size_2,
                                  text_size: block.settings.text_size_2,
                                  content_position: block.settings.content_position_2,
                                  columns_desktop: 4,
                                  show_in_header: true
                                %}
                              </div>
                            {%- endif -%} 
                            {%- if block.settings.image_3 -%}
                              {% style %}
                                .image-{{ block.id }}-3 {
                                  height: {{ block.settings.image_height_3 }}px;
                                }
                              {% endstyle %}
                              {% assign blockID = block.id | append: "-3" %}
                              <div class="w-full group relative background-color-{{ blockID }}{% if block.settings.promotion_position == 'right' %} ltr{% endif %}{% if settings.edges_type == 'rounded_corners' %} rounded-[10px]{% endif %}">
                                {% render 'promotion-image',
                                  blockID: blockID,
                                  image: block.settings.image_3,
                                  enable_text_overlay: block.settings.enable_text_overlay_3,
                                  heading: block.settings.heading_3,
                                  content: block.settings.text_3,
                                  button_label: block.settings.button_label_3,
                                  button_link: block.settings.button_link_3,
                                  open_new_window: block.settings.open_new_window_button_3,
                                  content_alignment: 'center',
                                  full_width: false,
                                  overlay_opacity: block.settings.overlay_opacity_3,
                                  show_button_primary: block.settings.show_button_primary_3,
                                  background_color: block.settings.background_color,
                                  color_text: block.settings.color_text,
                                  color_button: block.settings.color_button,
                                  color_text_button: block.settings.color_text_button,
                                  color_button_hover: block.settings.color_button_hover,
                                  color_text_button_hover: block.settings.color_text_button_hover,
                                  color_button_secondary: block.settings.color_button_secondary,
                                  heading_size: block.settings.heading_size_3,
                                  text_size: block.settings.text_size_3,
                                  content_position: block.settings.content_position_3,
                                  columns_desktop: 4,
                                  show_in_header: true
                                %}
                              </div>
                            {%- endif -%} 
                          </div>
                        </div>
                      {%- endif -%}
                    </div>
                  </div>
                {%- endif -%}
              </li>
            {%- endif -%}
          {%- when 'tree_menu' -%}
            {%- if block.settings.heading != blank -%}
              {%- liquid
                assign link = false
                assign is_link = false
                if block.settings.menu_item_link != blank
                  assign link = block.settings.menu_item_link
                endif
                if block.settings.menu.links != blank
                  assign is_link = true
                endif 
              -%}
              <li x-data='{ active: false }' 
                class="tree-menu pr-5{% if logo_center %} mr-7{% else %} pl-7{% endif %}{% if is_link %} relative has-dropdown{% endif %}"
                x-on:mouseover="$store.xHeaderMenu.selectItem($el); $el.classList.add('is-focus');"
                @mouseleave="$el.classList.remove('is-focus');"
                @focusin="$store.xHeaderMenu.selectItem($el); $el.classList.add('is-focus');"
                @focusout="$el.classList.remove('is-focus');"
              >
                <div class="relative">
                  <a
                    href="{% if link %}{{ link }}{% else %}#{% endif %}"
                    class="cursor-pointer tree-menu-item p-break-words{% if is_link %} flex items-center{% else %} inline-block{% endif %} justify-center pt-1 pb-1 relative duration-200 transition hover-text-link is-focus:link-active{% if request.path == link %} link-active{% endif %}" 
                    {% if is_link %}x-init="$store.xHeaderMenu.isTouch && $store.xHeaderMenu.touchItem($el)"{% endif %}
                    :class="active && 'link-active'"
                    {% if block.settings.open_new_window and link %} target="_blank"{% endif %}
                  > 
                    <span>{{ block.settings.heading }}</span>
                    {%- if is_link -%}
                      <span class="w-5 pl-2">{% render 'icon-alls', icon: 'icon-caret' %}</span>
                    {%- endif -%}
                  </a>
                  {%- if block.settings.label != blank -%}
                    {%- style -%}
                      .color-label-{{ block.id }} {
                        background: {{ block.settings.label_color }};
                        color: {{ block.settings.label_text_color_light }}
                      }
                      .color-label-{{ block.id }}:before{
                        border-top-color: {{ block.settings.label_color }}; 
                      }
                      .dark .color-label-{{ block.id }} {
                        background: {{ block.settings.label_color_dark }};
                        color: {{ block.settings.label_text_color_dark }}
                      }
                      .dark .color-label-{{ block.id }}:before {
                        border-top-color: {{ block.settings.label_color_dark }};
                      }
                    {%- endstyle -%}    
                    <div class="color-label-{{ block.id }} flex items-center absolute -right-1.5 bottom-[85%] rounded-sm shadow-md pl-2 pr-2 pt-0.5 pb-0.5 text-[10px] before:absolute before:w-0 before:h-0 before:border-b-8 before:border-b-transparent before:border-r-transparent before:border-r-8 before:border-t-8 before:-bottom-3.5 before:left-2">
                      {% if block.settings.icon != 'none' %}
                        <span class="w-3 h-3 mr-1">
                          {% if block.settings.custom_icon == blank %}
                            {% render 'icon-labels-bags', icon: block.settings.icon %}
                          {% else %}
                            {{ block.settings.custom_icon }}
                          {% endif %}
                        </span>
                      {% endif %}                
                      <span>{{ block.settings.label }}</span>
                    </div>
                  {%- endif -%} 
                </div>
                {%- if is_link -%}
                  <div class="toggle-menu absolute z-50 background-header top-full left-0 w-52 shadow-md transition-all delay-150 ease-in-out is-focus:text-[rgba(var(--colors-text))] max-h-0 opacity-0 overflow-hidden">
                    <ul class="pt-5 pb-5">
                      {%- for link in block.settings.menu.links -%}
                        {%- liquid
                          assign is_link = false
                          if link.links != blank
                            assign is_link = true
                          endif
                        -%}
                        <li {% if link.current or link.child_active %}x-init="active = true"{% endif %} 
                          x-data="{ openSub: false }" 
                          class="relative pl-7 pr-6 font-normal" 
                          @mouseover="openSub = true; $el.classList.add('is-focus-child');" 
                          @mouseleave="$el.classList.remove('is-focus-child');"
                          @mouseover.away="openSub = false"
                          @focusin="openSub = true; $el.classList.add('is-focus-child');" 
                          @focusout="openSub = false; $el.classList.remove('is-focus-child');"
                        >
                          <div class="sub-menu flex items-center{% unless forloop.first %} pt-3{% endunless %}">
                            {%- render 'menu-item-image', link: link, show_image_collection: block.settings.show_image_collection, show_first_image_product: block.settings.show_first_image_product, class_ratio: "w-8 h-8 mr-4", image_left: true -%}
                            <span class="flex-1">
                              <a href="{{ link.url }}" class="nav-link relative p-break-words{% if is_link %} flex items-center pr-5{% else %} inline-block{% endif %} duration-200 transition hover-text-link is-focus-child:effect-inline{% if link.current or link.child_active %} flex border-b effect-inline{% endif %}">
                                <span >{{ link.title | escape }}</span>
                                {%- if is_link -%}
                                  <span class="z-10 w-5 h-4 pt-1 pb-1 pr-1 pl-1 rounded-full -rotate-90 block absolute right-0">{% render 'icon-alls', icon: 'icon-caret' %}</span>
                                {%- endif -%}
                              </a>
                            </span>
                          </div>
                          {%- if is_link -%}
                            <div class="background-header absolute{% if forloop.first %} -top-5{% else %} -top-2{% endif %} left-full w-full shadow-showdownInset" :class="openSub ? 'opacity-1 max-h-auto' : 'opacity-0 max-h-0 overflow-hidden' ">
                              <ul class="pt-5 pb-5">
                                {%- for childlink in link.links -%}
                                  {%- liquid
                                    assign is_link = false
                                    if childlink.links != blank
                                      assign is_link = true
                                    endif
                                  -%}
                                  <li class="relative pl-7 pr-6" 
                                    x-data="{ openChild: false }" 
                                    @mouseover="openChild = true; $el.classList.add('is-focus-subchild');" 
                                    @mouseleave="$el.classList.remove('is-focus-subchild');"
                                    @mouseover.away="openChild = false"
                                    @focusin="openChild = true; $el.classList.add('is-focus-subchild');"
                                    @focusout="openChild= false; $el.classList.remove('is-focus-subchild');"
                                  >
                                    <div class="flex items-center{% unless forloop.first %} pt-3{% endunless %}">
                                      {%- render 'menu-item-image', link: childlink, show_image_collection: block.settings.show_image_collection, show_first_image_product: block.settings.show_first_image_product, class_ratio: "w-8 h-8 mr-4", image_left: true -%}
                                      <span class="flex-1">
                                        <a href="{{ childlink.url }}" class="nav-link{% if is_link %} flex items-center pr-5{% else %} inline-block{% endif %} p-break-words relative duration-200 hover-text-link transition is-focus-subchild:effect-inline{% if childlink.current or childlink.child_active %} border-b effect-inline{% endif %}">
                                          <span>{{ childlink.title | escape }}</span>
                                          {%- if is_link -%}
                                            <span class="z-10 w-5 h-4 pt-1 pb-1 pl-1 pr-1 rounded-full -rotate-90 block absolute right-0">{% render 'icon-alls', icon: 'icon-caret' %}</span>
                                          {%- endif -%}
                                        </a>
                                      </span>
                                    </div>
                                    {%- if is_link -%}
                                      <ul class="absolute{% if forloop.first %} -top-5{% else %} -top-2{% endif %} w-full left-full background-header shadow-showdownInset pt-5 pb-5" x-show="openChild">
                                        {%- for grandchildlink in childlink.links -%}
                                          <li class="flex items-center pl-7 pr-6 relative{% unless forloop.first %} pt-3{% endunless %}">
                                            {%- render 'menu-item-image', link: grandchildlink, show_image_collection: block.settings.show_image_collection, show_first_image_product: block.settings.show_first_image_product, class_ratio: "w-8 h-8 mr-4", image_left: true -%}
                                            <span class="flex-1">
                                              <a 
                                                class="nav-link relative p-break-words duration-200 transition hover-text-link{% if grandchildlink.current %} flex border-b effect-inline{% else %} inline-block{% endif %}"
                                                href="{{ grandchildlink.url }}" 
                                                {% if grandchildlink.current %} aria-current="page"{% endif %}>
                                                {{ grandchildlink.title | escape }}
                                              </a>
                                            </span>
                                          </li>
                                        {%- endfor -%}
                                      </ul>
                                    {%- endif -%}
                                  </li>
                                {%- endfor -%}
                              </ul>
                            </div>
                          {%- endif -%}
                        </li>
                      {%- endfor -%}
                    </ul>
                  </div>
                {%- endif -%}
              </li>
            {%- endif -%}
          {%- when 'banner_menu' -%}
            {%- if block.settings.heading != blank -%}
              {%- liquid
                assign link = false
                if block.settings.menu_item_link != blank
                  assign link = block.settings.menu_item_link
                endif

                assign columns_desktop = 0
                if block.settings.image_3 != blank
                  assign columns_desktop = columns_desktop | plus: 1
                endif
                if block.settings.image_2 != blank
                  assign columns_desktop = columns_desktop | plus: 1
                endif
                if block.settings.image_1 != blank
                  assign columns_desktop = columns_desktop | plus: 1
                endif
              -%}
              <li x-data='{ active: false }' 
                class="tabbed_menu pr-5{% if logo_center %} mr-5{% else %} pl-5{% endif %}{% if columns_desktop > 0 %} has-dropdown{% endif %}" 
                x-on:mouseover="$store.xHeaderMenu.selectItem($el); $el.classList.add('is-focus');"
                @mouseleave="$el.classList.remove('is-focus');"
                @focusin="$store.xHeaderMenu.selectItem($el); $el.classList.add('is-focus');"
                @focusout="$el.classList.remove('is-focus');">
                <div class="tabbed_menu_item relative">
                  <a href="{% if link %}{{ link }}{% else %}#{% endif %}"
                    class="cursor-pointer flex items-center p-break-words justify-center pt-1 pb-1 duration-200 hover-text-link transition is-focus:link-active{% if request.path == link %} link-active{% endif %}" 
                    :class="active && 'link-active'"
                    {% if columns_desktop > 0 %}x-init="$store.xHeaderMenu.isTouch && $store.xHeaderMenu.touchItem($el)"{% endif %}
                    {% if link and block.settings.open_new_window %}target="_blank"{% endif %}
                  >
                    <span>{{ block.settings.heading }}</span>
                    {%- if columns_desktop > 0 -%}
                      <span class="w-5 pl-2">{% render 'icon-alls', icon: 'icon-caret' %}</span>
                    {%- endif -%}
                  </a>
                  {%- if block.settings.label != blank -%}
                    {%- style -%}
                      .color-label-{{ block.id }} {
                        background: {{ block.settings.label_color }};
                        color: {{ block.settings.label_text_color_light }}
                      }
                      .color-label-{{ block.id }}:before{
                        border-top-color: {{ block.settings.label_color }}; 
                      }
                      .dark .color-label-{{ block.id }} {
                        background: {{ block.settings.label_color_dark }};
                        color: {{ block.settings.label_text_color_dark }}
                      }
                      .dark .color-label-{{ block.id }}:before {
                        border-top-color: {{ block.settings.label_color_dark }};
                      }
                    {%- endstyle -%}    
                    <div class="color-label-{{ block.id }} flex items-center absolute -right-1.5 bottom-[85%] rounded-sm shadow-md pl-2 pr-2 pt-0.5 pb-0.5 text-[10px] before:absolute before:w-0 before:h-0 before:border-b-8 before:border-b-transparent before:border-r-transparent before:border-r-8 before:border-t-8 before:-bottom-3.5 before:left-2">
                      {% if block.settings.icon != 'none' %}
                        <span class="w-3 h-3 mr-1">
                          {% if block.settings.custom_icon == blank %}
                            {% render 'icon-labels-bags', icon: block.settings.icon %}
                          {% else %}
                            {{ block.settings.custom_icon }}
                          {% endif %}
                        </span>
                      {%- endif -%}                
                      <span>{{ block.settings.label }}</span>
                    </div>
                  {%- endif -%} 
                </div>
                {% if columns_desktop > 0 %}
                  <div class="toggle-menu max-h-0 transition-all duration-300 delay-150 ease-in-out is-focus:text-[rgba(var(--colors-text))] absolute w-full background-header left-0 z-50 shadow-md opacity-0 overflow-hidden">
                    <div class="flex gap-x-8{% unless block.settings.full_width %} mx-auto page-width pb-5{% endunless %} pt-8 pb-8"> 
                      {%- if block.settings.image_1 != blank -%}
                        <div class="group section--{{ section.id }} w-full flex relative overflow-hidden h-[{{ block.settings.desktop_height }}]">
                          {% assign blockID = block.id | append: "-1" %}
                          {% render 'promotion-image',
                            blockID: blockID,
                            image: block.settings.image_1,
                            enable_text_overlay: true,
                            heading: block.settings.heading_1,
                            content: block.settings.content_1,
                            subheading: block.settings.subheading_1,
                            button_label: block.settings.button_label_1,
                            button_link: block.settings.button_link_1,
                            open_new_window: block.settings.open_new_window_button_1,
                            content_alignment: block.settings.text_align_1,
                            full_width: block.settings.full_width,
                            overlay_opacity: block.settings.overlay_opacity_1,
                            show_button_primary: block.settings.show_button_primary_1,
                            background_color: block.settings.background_color,
                            color_text: block.settings.color_text,
                            color_button: block.settings.color_button,
                            color_text_button: block.settings.color_text_button,
                            color_button_hover: block.settings.color_button_hover,
                            color_text_button_hover: block.settings.color_text_button_hover,
                            color_button_secondary: block.settings.color_button_secondary,
                            heading_size: block.settings.heading_size_1,
                            text_size: block.settings.text_size_1,
                            content_position: block.settings.content_position_1,
                            columns_desktop: columns_desktop,
                            show_in_header: true
                          %}
                        </div>
                      {% endif %}
                      {%- if block.settings.image_2 != blank -%}
                        {% assign blockID = block.id | append: "-2" %}
                        <div class="group section--{{ section.id }} w-full flex relative overflow-hidden h-[{{ block.settings.desktop_height }}]">
                          {% render 'promotion-image',
                            blockID: blockID,
                            image: block.settings.image_2,
                            enable_text_overlay: true,
                            heading: block.settings.heading_2,
                            content: block.settings.content_2,
                            subheading: block.settings.subheading_2,
                            button_label: block.settings.button_label_2,
                            button_link: block.settings.button_link_2,
                            open_new_window: block.settings.open_new_window_button_2,
                            content_alignment: block.settings.text_align_2,
                            full_width: block.settings.full_width,
                            overlay_opacity: block.settings.overlay_opacity_2,
                            show_button_primary: block.settings.show_button_primary_2,
                            background_color: block.settings.background_color,
                            color_text: block.settings.color_text,
                            color_button: block.settings.color_button,
                            color_text_button: block.settings.color_text_button,
                            color_button_hover: block.settings.color_button_hover,
                            color_text_button_hover: block.settings.color_text_button_hover,
                            color_button_secondary: block.settings.color_button_secondary,
                            heading_size: block.settings.heading_size_2,
                            text_size: block.settings.text_size_2,
                            content_position: block.settings.content_position_2,
                            columns_desktop: columns_desktop,
                            show_in_header: true
                          %}
                        </div>
                      {% endif %}
                      {%- if block.settings.image_3 != blank -%}
                        {% assign blockID = block.id | append: "-3" %}
                        <div class="group section--{{ section.id }} w-full flex relative overflow-hidden h-[{{ block.settings.desktop_height }}]">
                          {% render 'promotion-image',
                            blockID: blockID,
                            image: block.settings.image_3,
                            enable_text_overlay: true,
                            heading: block.settings.heading_3,
                            content: block.settings.content_3,
                            subheading: block.settings.subheading_3,
                            button_label: block.settings.button_label_3,
                            button_link: block.settings.button_link_3,
                            open_new_window: block.settings.open_new_window_button_3,
                            content_alignment: block.settings.text_align_3,
                            full_width: block.settings.full_width,
                            overlay_opacity: block.settings.overlay_opacity_3,
                            show_button_primary: block.settings.show_button_primary_3,
                            background_color: block.settings.background_color,
                            color_text: block.settings.color_text,
                            color_button: block.settings.color_button,
                            color_text_button: block.settings.color_text_button,
                            color_button_hover: block.settings.color_button_hover,
                            color_text_button_hover: block.settings.color_text_button_hover,
                            color_button_secondary: block.settings.color_button_secondary,
                            heading_size: block.settings.heading_size_3,
                            text_size: block.settings.text_size_3,
                            content_position: block.settings.content_position_3,
                            columns_desktop: columns_desktop,
                            show_in_header: true
                          %}
                        </div>
                      {% endif %}
                    </div>
                  </div>
                {% endif %}
              </li>
            {%- endif -%}
          {%- when "product_menu" -%}
            {%- if block.settings.heading != blank -%}
              {%- liquid
                assign link = false
                assign is_link = false
                if block.settings.menu_item_link
                  assign link = block.settings.menu_item_link
                endif
                if block.settings.menu.links != blank
                  assign is_link = true
                endif 
              -%}
              <li x-data='{ active: false }' 
                class="tabbed_menu product-menu pr-5{% if logo_center %} mr-5{% else %} pl-5{% endif %}{% if is_link %} has-dropdown{% endif %}" 
                x-on:mouseover="$store.xHeaderMenu.selectItem($el); $el.classList.add('is-focus');"
                @mouseleave="$el.classList.remove('is-focus');"
                @focusin="$store.xHeaderMenu.selectItem($el); $el.classList.add('is-focus');"
                @focusout="$el.classList.remove('is-focus');">
                <div class="tabbed_menu_item relative">
                  <a href="{% if link %}{{ link }}{% else %}#{% endif %}"{% if link and block.settings.open_new_window %} target="_blank"{% endif %}
                    class="cursor-pointer flex items-center p-break-words justify-center pt-1 pb-1 duration-200 hover-text-link transition is-focus:link-active{% if request.path == link %} link-active{% endif %}" 
                    :class="active && 'link-active'"
                    {% if is_link %}x-init="$store.xHeaderMenu.isTouch && $store.xHeaderMenu.touchItem($el)"{% endif %}
                  >
                    <span>{{ block.settings.heading }}</span>
                    {%- if is_link -%}
                      <span class="w-5 pl-2">{% render 'icon-alls', icon: 'icon-caret' %}</span>
                    {%- endif -%}
                  </a>
                  {%- if block.settings.label != blank -%}
                    {%- style -%}
                      .color-label-{{ block.id }} {
                        background: {{ block.settings.label_color }};
                        color: {{ block.settings.label_text_color_light }}
                      }
                      .color-label-{{ block.id }}:before{
                        border-top-color: {{ block.settings.label_color }}; 
                      }
                      .dark .color-label-{{ block.id }} {
                        background: {{ block.settings.label_color_dark }};
                        color: {{ block.settings.label_text_color_dark }}
                      }
                      .dark .color-label-{{ block.id }}:before {
                        border-top-color: {{ block.settings.label_color_dark }};
                      }
                    {%- endstyle -%}    
                    <div class="color-label-{{ block.id }} flex items-center absolute -right-1.5 bottom-[85%] rounded-sm shadow-md pl-2 pr-2 pt-0.5 pb-0.5 text-[10px] before:absolute before:w-0 before:h-0 before:border-b-8 before:border-b-transparent before:border-r-transparent before:border-r-8 before:border-t-8 before:-bottom-3.5 before:left-2">
                      {% if block.settings.icon != 'none' %}
                        <span class="w-3 h-3 mr-1">
                          {% if block.settings.custom_icon == blank %}
                            {% render 'icon-labels-bags', icon: block.settings.icon %}
                          {% else %}
                            {{ block.settings.custom_icon }}
                          {% endif %}
                        </span>
                      {%- endif -%}                
                      <span>{{ block.settings.label }}</span>
                    </div>
                  {%- endif -%} 
                </div>
                {%- if is_link -%}
                  <div class="toggle-menu background-header mega-menu-{{ block.settings.tab_style }} max-h-0 transition-all duration-300 delay-150 ease-in-out is-focus:text-[rgba(var(--colors-text))] absolute w-full background-header left-0 z-50 shadow-md opacity-0 overflow-hidden">
                    <div class="mega-menu-container page-width mx-auto">
                      <div class="mega-nav">
                        <ul class="mega-list-nav items-end flex-wrap pt-12 pb-5"> 
                          {%- for link in block.settings.menu.links -%}
                            {%- liquid
                              assign count = 0
                              for childlink in link.links
                                if childlink.type == 'product_link'
                                  assign count = count | plus: 1
                                endif
                              endfor
                              assign enable_slider = false
                              if count > 4
                                assign enable_slider = true
                              endif
                            -%}
                            <li 
                              class="table{% if link.links != blank %} has-dropdown{% endif %}"
                              x-on:mouseover="$store.xHeaderMenu.selectItem($el, true); $el.classList.add('is-focus-child');"
                              @mouseleave="$el.classList.remove('is-focus-child');"
                              @focusin="$store.xHeaderMenu.selectItem($el, true); $el.classList.add('is-focus-child');"
                              @focusout="$el.classList.remove('is-focus-child');"
                              {%- if link.current or link.child_active %}x-init="active = true;"{% endif %}
                            >
                              <div class="sub-menu flex items-end z-10 relative{% if block.settings.tab_style == 'vertical' %} mb-2 w-56 pb-1{% if forloop.first %} pt-3 border-t{% else %} pt-1{% endif %}{% else %} w-[15.6rem] pt-1.5 pb-1.5{% endif %}">
                                <span class="flex-1">
                                  <a
                                    href="{{ link.url }}"
                                    class="nav-link p-break-words relative z-10 border-b pb-3 flex items-center{% if count > 0 and link.links != blank %} pr-5{% endif %} hover-text-link is-focus-child:effect-inline{%- if link.current or link.child_active %} flex effect-inline{% if block.settings.tab_style != 'horizontal' %} border-b{% endif %}{% endif %}"
                                    x-init="$store.xHeaderMenu.isTouch && $store.xHeaderMenu.touchItem($el, true)"
                                  >
                                    <span class="p-break-words">{{ link.title | escape }}</span>
                                    {%- if count > 0 and link.links != blank -%}
                                      <span class="z-10 w-5 h-4 pt-1 pb-1 pl-1 pr-1 rounded-full block absolute right-0 -rotate-90">
                                        {% render 'icon-alls', icon: 'icon-caret' %}
                                      </span>
                                    {%- endif -%}
                                  </a>
                                </span>
                              </div>
                              {%- if count > 0 -%}
                                {% liquid 
                                  assign columns_desktop = 4
                                  if block.settings.tab_style == 'horizontal'
                                    assign columns_desktop = 5
                                  endif
                                %}
                                <div class="toggle-menu-sub pb-7 left-0 overflow-hidden delay-150 z-0 absolute right-0{% if block.settings.tab_style == 'horizontal' %} background-header{% if image_count < 1 %} top-full{% endif %}{% else %} shadow-md background-header min-h-full top-0 left-0 pl-7 xl:pr-5{% endif %}{% if forloop.first %} block{% else %} hidden{% endif %}">   
                                  <div class="mega-sub-container pr-0 relative scrollbar-body scrollbar-visible{% if block.settings.tab_style == 'vertical' %} pl-[18rem]{% endif %} page-width mx-auto">
                                    <div class="mega-sub-nav pr-5 scrollbar-body scrollbar-visible">                                      
                                      <div class="order-2 w-full">
                                        <div 
                                          id="x-product-menu-{{ block.id }}-{{ forloop.index }}"
                                          {% if enable_slider %}
                                            class="x-splide splide w-full"
                                            x-intersect='$store.xSplide.load($el, {
                                              "focus": "center",
                                              "perPage": {{ columns_desktop }},
                                              "speed": 500,
                                              "updateOnMove": "true",
                                              "progressBar": {{ columns_desktop }},
                                              "gap": "1.75rem",
                                              "perMove": {{ columns_desktop }},
                                              "pagination": false, 
                                              "classes": {
                                                "pagination": "hidden"
                                              }
                                            })'
                                          {%- endif -%}
                                        >
                                          <div class="relative{% if enable_slider %} splide__track{% endif %} overflow-hidden">
                                            <div class="w-full{% if enable_slider %} splide__list flex{% else %} grid grid-cols-{{ columns_desktop }} gap-x-7{% endif %}">
                                              {%- for childlink in link.links -%}
                                                {% if childlink.type == 'product_link' %}
                                                  {%- liquid 
                                                    assign product_handle = childlink.object.handle
                                                    assign card_product = all_products[product_handle]
                                                    assign blockID = block.id | append: forloop.index 
                                                  -%}
                                                  {% render 'card-product',
                                                    card_product: card_product,
                                                    section_id: section.id,
                                                    class_slide: "splide__slide x-splide-slide",
                                                    columns_desktop: columns_desktop,
                                                    column_mobile: 1,
                                                    index: forloop.index,
                                                    list_name: "",
                                                    collection: "",
                                                    enable_desktop_slider: true,
                                                    block_id: blockID,
                                                    disable_quickview: true,
                                                    disable_color_swatch: true
                                                  %}
                                                {% endif %}
                                              {%- endfor -%}
                                            </div>
                                          </div>
                                          {%- if enable_slider -%}
                                            <div class="lg:flex items-center hidden mt-2">
                                              <div class="splide-progress inline-block grow">
                                                <div class="splide-progress-bar"></div>
                                              </div>
                                              <div class="splide__arrows lg:inline-flex ml-5 hidden">
                                                <button class="splide__arrow splide__arrow--prev hidden lg:block none_border z-10 w-6 h-6 after:text-[20px] -rotate-180 duration-200 opacity-60 hover:opacity-100 disabled:opacity-40 disabled:cursor-not-allowed" aria-label="previous slide">
                                                  {% render 'icon-alls', icon: 'icon-arrow' %}
                                                </button>
                                                <button class="splide__arrow splide__arrow--next hidden lg:block none_border z-10 w-6 h-6 after:text-[20px] ml-2 duration-200 opacity-60 hover:opacity-100 disabled:opacity-40 disabled:cursor-not-allowed" aria-label="previous slide">
                                                  {% render 'icon-alls', icon: 'icon-arrow' %}
                                                </button>
                                              </div>
                                            </div>
                                          {%- endif -%}
                                        </div>
                                      </div>
                                    </div>
                                  </div>
                                </div>
                              {%- endif -%}
                            </li>
                          {%- endfor -%}
                        </ul>
                      </div>
                    </div>
                  </div>
                {%- endif -%}
              </li>
            {%- endif -%}
          {%- when "blog_menu" -%}
            {%- if block.settings.heading != blank -%}
              {%- liquid
                assign link = false
                assign is_link = false
                assign blog = false
                if block.settings.menu_item_link
                  assign link = block.settings.menu_item_link
                endif
                if block.settings.blog and block.settings.blog.articles_count > 0
                  assign blog = block.settings.blog
                endif
                if block.settings.menu.links != blank and block.settings.show_other_blog
                  assign is_link = true
                endif
              -%}
              <li x-data='{ active: false }' 
                class="blog_menu pr-5{% if logo_center %} mr-5{% else %} pl-5{% endif %}{% if is_link or blog %} has-dropdown{% endif %}" 
                x-on:mouseover="$store.xHeaderMenu.selectItem($el); $el.classList.add('is-focus');"
                @mouseleave="$el.classList.remove('is-focus');"
                @focusin="$store.xHeaderMenu.selectItem($el); $el.classList.add('is-focus');"
                @focusout="$el.classList.remove('is-focus');">
                <div class="blog_menu_item relative">
                  <a href="{% if link %}{{ link }}{% else %}#{% endif %}"
                    class="cursor-pointer flex items-center p-break-words justify-center pt-1 pb-1 duration-200 hover-text-link transition is-focus:link-active{% if request.path == link %} link-active{% endif %}" 
                    :class="active && 'link-active'"
                    {% if is_link or blog %}x-init="$store.xHeaderMenu.isTouch && $store.xHeaderMenu.touchItem($el)"{% endif %}
                    {% if link and block.settings.open_new_window %}target="_blank"{% endif %}
                  >
                    <span>{{ block.settings.heading }}</span>
                    {%- if is_link or blog -%}
                      <span class="w-5 pl-2">{% render 'icon-alls', icon: 'icon-caret' %}</span>
                    {%- endif -%}
                  </a>
                  {%- if block.settings.label != blank -%}
                    {%- style -%}
                      .color-label-{{ block.id }} {
                        background: {{ block.settings.label_color }};
                        color: {{ block.settings.label_text_color_light }}
                      }
                      .color-label-{{ block.id }}:before{
                        border-top-color: {{ block.settings.label_color }}; 
                      }
                      .dark .color-label-{{ block.id }} {
                        background: {{ block.settings.label_color_dark }};
                        color: {{ block.settings.label_text_color_dark }}
                      }
                      .dark .color-label-{{ block.id }}:before {
                        border-top-color: {{ block.settings.label_color_dark }};
                      }
                    {%- endstyle -%}    
                    <div class="color-label-{{ block.id }} flex items-center absolute -right-1.5 bottom-[85%] rounded-sm shadow-md pl-2 pr-2 pt-0.5 pb-0.5 text-[10px] before:absolute before:w-0 before:h-0 before:border-b-8 before:border-b-transparent before:border-r-transparent before:border-r-8 before:border-t-8 before:-bottom-3.5 before:left-2">
                      {% if block.settings.icon != 'none' %}
                        <span class="w-3 h-3 mr-1">
                          {% if block.settings.custom_icon == blank %}
                            {% render 'icon-labels-bags', icon: block.settings.icon %}
                          {% else %}
                            {{ block.settings.custom_icon }}
                          {% endif %}
                        </span>
                      {%- endif -%}                
                      <span>{{ block.settings.label }}</span>
                    </div>
                  {%- endif -%} 
                </div>
                <div class="toggle-menu max-h-0 transition-all duration-300 delay-150 ease-in-out is-focus:text-[rgba(var(--colors-text))] absolute w-full background-header left-0 z-50 shadow-md opacity-0 overflow-hidden">
                  <div class="page-width blog-position-{{ block.settings.position }}{% if blog and blog.articles_count > 0 or is_link %} flex gap-x-3{% endif %} mx-auto">
                    {%- if is_link -%}
                      <div class="pt-8 pb-5">
                        {% if block.settings.heading_menu != blank %}
                          <div class="blog-other-title">
                            <p class="table relative w-[15.6rem] pt-1 pb-3 border-b uppercase text-normal opacity-70">
                              {{ block.settings.heading_menu }}
                            </p>
                          </div>
                        {% endif %}
                        <ul class="list-blog-menu{% if block.settings.heading_menu != blank %} pt-2{% endif %} overflow-x-hidden scrollbar-body scrollbar-visible overflow-y-auto"> 
                          {%- for link in block.settings.menu.links -%}
                            <li 
                              class="table{% if link.links != blank %} has-dropdown{% endif %}"
                              x-on:mouseover="$store.xHeaderMenu.selectItem($el, true); $el.classList.add('is-focus-child');"
                              @mouseleave="$el.classList.remove('is-focus-child');"
                              @focusin="$store.xHeaderMenu.selectItem($el, true); $el.classList.add('is-focus-child');"
                              @focusout="$el.classList.remove('is-focus-child');"
                              {%- if link.current or link.child_active %}x-init="active = true;"{% endif %}
                            >
                              <div class="sub-menu z-10 relative mb-2 w-[15.6rem] pt-1 pb-1">
                                <a
                                  href="{{ link.url }}"
                                  class="nav-link p-break-words relative z-10 pb-1 hover-text-link is-focus-child:effect-inline{%- if link.current %} effect-inline{% endif %}"
                                  x-init="$store.xHeaderMenu.isTouch && $store.xHeaderMenu.touchItem($el, true)"
                                >
                                  <span class="p-break-words">{{ link.title | escape }}</span>
                                </a>
                              </div>
                            </li>
                          {%- endfor -%}
                        </ul>
                      </div>
                    {%- endif -%}
                    {% assign post_limit = block.settings.rows_desktop | times: block.settings.columns_desktop %}
                    {% if blog %}
                      <div class="pt-8 pb-11 grow">
                        <p class=" {% if is_link %}blog-menu-title{% endif %} relative pt-1 pb-3 uppercase text-normal opacity-70">{% if block.settings.heading_post != blank %}{{ block.settings.heading_post }}{% else %}{{ 'blogs.recent_posts' | t }}{% endif %}</p>
                        <div class="blog-posts-menu{% if is_link %} list-blog{% endif %} overflow-x-hidden scrollbar-body scrollbar-visible overflow-y-auto">
                          <div class="grid grid-cols-{{ block.settings.columns_desktop }} md:gap-x-8 pb-1">
                            {%- for article in blog.articles limit: post_limit -%}
                              {% liquid
                                assign image_desktop_top = false
                                if forloop.index <= block.settings.columns_desktop and block.settings.enable_featured_post
                                  assign image_desktop_top = true
                                endif
                              %}
                              {%- render 'article-card',
                                article: article,
                                index: forloop.index,
                                columns_desktop: block.settings.columns_desktop,
                                columns_mobile: "2",
                                blog_header: true,
                                image_desktop_top: image_desktop_top,
                                class_margin: '',
                                image_ratio: block.settings.image_ratio,
                                show_image: block.settings.show_image, 
                                show_excerpt: block.settings.show_excerpt,
                                show_in_header: true
                              -%}
                            {%- endfor -%}
                          </div>
                        </div>
                      </div>
                    {% endif %}
                  </div>
                </div>
              </li>
            {%- endif -%}
          {%- when 'contact_menu' -%}
            {%- if block.settings.heading != blank -%}
              {%- liquid
                assign link = false
                if block.settings.menu_item_link != blank
                  assign link = block.settings.menu_item_link
                endif
                if block.settings.show_contact_information
                  assign class_infomation = "w-3/12"
                  assign class_map = "w-4/12"
                  assign class_form = "w-5/12"
                else
                  assign class_map = "w-7/12"
                  assign class_form = "w-6/12"
                endif
                if block.settings.sort_order == 'options__2'
                  assign class_infomation = class_infomation | append: " order-2"
                  assign class_map = class_map | append: " order-3"
                  assign class_form = class_form | append: " order-1"
                endif
                if block.settings.sort_order == 'options__3'
                  assign class_infomation = class_infomation | append: " order-2"
                  assign class_map = class_map | append: " order-1"
                  assign class_form = class_form | append: " order-3"
                endif
                if block.settings.sort_order == 'options__4'
                  assign class_infomation = class_infomation | append: " order-1"
                  assign class_map = class_map | append: " order-3"
                  assign class_form = class_form | append: " order-2"
                endif
              -%}
              <li x-data='{ active: false }' 
                class="contact_menu pr-5 has-dropdown{% if logo_center %} mr-5{% else %} pl-5{% endif %}" 
                x-on:mouseover="$store.xHeaderMenu.selectItem($el); $el.classList.add('is-focus');"
                @mouseleave="$el.classList.remove('is-focus');"
                @focusin="$store.xHeaderMenu.selectItem($el); $el.classList.add('is-focus');"
                @focusout="$el.classList.remove('is-focus');">
                <div class="tabbed_menu_item relative">
                  <a href="{% if link %}{{ link }}{% else %}#{% endif %}"
                    class="cursor-pointer flex items-center p-break-words justify-center pt-1 pb-1 duration-200 hover-text-link transition is-focus:link-active{% if request.path == link %} link-active{% endif %}" 
                    :class="active && 'link-active'"
                    x-init="$store.xHeaderMenu.isTouch && $store.xHeaderMenu.touchItem($el)"
                    {% if link and block.settings.open_new_window %}target="_blank"{% endif %}
                  >
                    <span>{{ block.settings.heading }}</span>
                    <span class="w-5 pl-2">{% render 'icon-alls', icon: 'icon-caret' %}</span>
                  </a>
                  {%- if block.settings.label != blank -%}
                    {%- style -%}
                      .color-label-{{ block.id }} {
                        background: {{ block.settings.label_color }};
                        color: {{ block.settings.label_text_color_light }}
                      }
                      .color-label-{{ block.id }}:before{
                        border-top-color: {{ block.settings.label_color }}; 
                      }
                      .dark .color-label-{{ block.id }} {
                        background: {{ block.settings.label_color_dark }};
                        color: {{ block.settings.label_text_color_dark }}
                      }
                      .dark .color-label-{{ block.id }}:before {
                        border-top-color: {{ block.settings.label_color_dark }};
                      }
                    {%- endstyle -%}    
                    <div class="color-label-{{ block.id }} flex items-center absolute -right-1.5 bottom-[85%] rounded-sm shadow-md pl-2 pr-2 pt-0.5 pb-0.5 text-[10px] before:absolute before:w-0 before:h-0 before:border-b-8 before:border-b-transparent before:border-r-transparent before:border-r-8 before:border-t-8 before:-bottom-3.5 before:left-2">
                      {% if block.settings.icon != 'none' %}
                        <span class="w-3 h-3 mr-1">
                          {% if block.settings.custom_icon == blank %}
                            {% render 'icon-labels-bags', icon: block.settings.icon %}
                          {% else %}
                            {{ block.settings.custom_icon }}
                          {% endif %}
                        </span>
                      {%- endif -%}                
                      <span>{{ block.settings.label }}</span>
                    </div>
                  {%- endif -%} 
                </div>
                <div class="toggle-menu max-h-0 transition-all duration-300 delay-150 ease-in-out is-focus:text-[rgba(var(--colors-text))] absolute w-full background-header left-0 z-50 shadow-md opacity-0 overflow-hidden">
                  <div class="flex mx-auto page-width gap-x-7 pt-8 pb-11">
                    <div class="overflow-hidden {{ class_map }}{% if settings.edges_type == 'rounded_corners' %} rounded-[10px]{% endif %}">
                      {%- if block.settings.image != blank -%}
                        {%- capture sizes -%}
                          (min-width: {{ settings.page_width }}px) calc({{ settings.page_width | divided_by: 3 | plus: 200 }}px ), 
                          (min-width: 768px) 50vw, 
                          100vw
                        {%- endcapture -%}
                        {{ block.settings.image | image_url: width: 3000 | image_tag: loading: 'lazy', sizes: sizes, widths: '375, 450, 750, 900, 1100, 1500, 1780, 2000, 3000, 3840', class: 'w-full h-full object-center object-cover z-0 inset-0 image-hover' }} 
                      {%- elsif block.settings.store_address != blank -%}
                        <div x-data="xMap('{{ block.settings.store_address }}')" class="h-full" x-intersect.once.margin.250px="load()"> 
                          <iframe src="" class="w-full h-full" title="Map"></iframe>
                        </div>
                      {%- else -%}
                        <div class="flex items-center justify-center bg-[#c9c9c9] w-full h-full">
                          {% render 'icon-placeholder', icon: 'icon-location-map', class: 'w-20 h-20 md:h-auto md:w-auto' %}
                        </div>
                      {%- endif -%}
                    </div>
                    <div class="{{ class_form }}">
                      {%- if block.settings.contact_heading != blank -%}
                        <h2 class="text-large leading-tight">
                          {{ block.settings.contact_heading | escape }}
                        </h2>
                      {%- endif -%}
                      {% if block.settings.infomation != blank %}
                        <div class="rte mt-3 font-normal">
                          {{ block.settings.infomation }}
                        </div>
                      {% endif %}
                      {% assign formID = "contact-form-" | append: block.id %}
                      {%- form 'contact', id: formID, class: 'eurus' -%}
                        <div class="contact__fields font-normal{% if block.settings.infomation != blank %} mt-8{% else %} mt-6{% endif %}">
                          <div class="flex gap-x-3.5">
                            <div class="mb-3 flex-1 relative">
                              <input
                                type="text"
                                id="ContactFormName-{{ section.id }}"
                                class="w-full pl-5 pr-5 lg:pl-6 lg:pr-6 pt-4 pb-1.5 border focus:outline-none focus:border-current input bg-transparent placeholder:opacity-0{% if settings.edges_type == 'rounded_corners' %} !rounded-md{% endif %}"
                                name="contact[{%- if block.settings.heading != blank -%}{{ block.settings.heading }}{%- else -%}name{% endif %}]"
                                value="{% if form.name %}{{ form.name }}{% elsif customer %}{{ customer.name }}{% endif %}"
                                autocapitalize="words" 
                                placeholder="{{ 'customer.name' | t }}"
                                {% if block.settings.mark_as_required %}
                                  required
                                {% endif %}>
                              <label class="leading-tight absolute top-1/2 left-5 lg:left-6 -translate-y-1/2 input_focus:text-xs input_focus:top-2.5 input_not_empty:top-2.5 input_not_empty:text-xs" for="ContactFormName-{{ section.id }}">
                                {{ 'customer.name' | t }}
                                {% if block.settings.mark_as_required %}
                                  <span aria-hidden="true">*</span>
                                {%- endif %}
                              </label>
                            </div>
                            <div class="mb-3 flex-1 relative"> 
                              <input
                                type="email"
                                id="ContactFormEmail-{{ section.id }}"
                                class="w-full border pl-5 pr-5 lg:pl-6 lg:pr-6 pt-4 pb-1.5 focus:outline-none focus:border-current input bg-transparent placeholder:opacity-0{% if settings.edges_type == 'rounded_corners' %} !rounded-md{% endif %}"
                                name="contact[email]"
                                autocomplete="email"
                                autocapitalize="off"
                                autocorrect="off"
                                value="{% if form.email %}{{ form.email }}{% elsif customer %}{{ customer.email }}{% endif %}" 
                                placeholder="{{ 'customer.email' | t }}"
                                required>
                                <label 
                                  class="leading-tight absolute top-1/2 left-5 lg:left-6 -translate-y-1/2 input_focus:text-xs input_focus:top-2.5 input_not_empty:top-2.5 input_not_empty:text-xs" 
                                  for="ContactFormEmail-{{ section.id }}"
                                >
                                  {{ 'customer.email' | t }}
                                  <span aria-hidden="true">*</span>
                                </label>
                            </div>
                          </div>
                          <div class="mb-3 relative">
                            <input
                              type="tel"
                              id="ContactFormPhone-{{ section.id }}"
                              class="border w-full pl-5 pr-5 lg:pl-6 lg:pr-6 pt-4 pb-1.5 focus:outline-none focus:border-current input bg-transparent placeholder:opacity-0{% if settings.edges_type == 'rounded_corners' %} !rounded-md{% endif %}"
                              name="contact[{%- if block.settings.heading != blank -%}{{ block.settings.heading }}{%- else -%}phone{% endif %}]"
                              pattern="[0-9\-]*"
                              value="{% if form.phone %}{{ form.phone }}{% elsif customer %}{{ customer.phone }}{% endif %}" 
                              placeholder="{{ 'customer.email' | t }}"
                              {% if block.settings.mark_as_required -%}
                                required
                              {%- endif -%}>
                              <label 
                                class="absolute top-1/2 left-5 lg:left-6 -translate-y-1/2 input_focus:text-xs input_focus:top-2.5 input_not_empty:top-2.5 input_not_empty:text-xs" 
                                for="ContactFormPhone-{{ section.id }}"
                              >
                                {{ 'templates.contact.form.phone' | t }}
                                {% if block.settings.mark_as_required %}
                                  <span aria-hidden="true">*</span>
                                {%- endif -%}
                              </label>
                          </div>
                          <div class="mb-2 md:mb-3 relative"> 
                            <textarea
                              id="ContactFormMessage-{{ section.id }}"
                              class="w-full pl-5 pr-5 lg:pl-6 lg:pr-6 pt-5 pb-1.5 border focus:outline-none focus:border-current input bg-transparent placeholder:opacity-0{% if settings.edges_type == 'rounded_corners' %} !rounded-md{% endif %}"
                              rows="4"
                              name="contact[{%- if block.settings.heading != blank -%}{{ block.settings.heading }}{%- else -%}message{% endif %}]" 
                              placeholder="{{ 'customer.email' | t }}"
                              {% if block.settings.mark_as_required %}
                                required
                              {% endif %}>
                              {{- form.message -}}
                            </textarea>
                            <label 
                              class="absolute top-3 md:top-4 left-5 lg:left-6 input_focus:text-xs input_focus:top-1 input_not_empty:top-1 input_not_empty:text-xs" 
                              for="ContactFormMessage-{{ section.id }}"
                            >
                              {{ 'templates.contact.form.message' | t }}
                              {% if block.settings.mark_as_required %}
                                <span aria-hidden="true">*</span>
                              {%- endif -%}
                            </label>
                          </div>
                        </div>
                        <div class="text-right mt-2.5">
                          <button type="submit" class="button button-solid leading-normal pl-8 pr-8 pt-2.5 pb-2.5 lg:pt-3 lg:pb-3 cursor-pointer empty:hidden pointer-events-auto">
                            {%- if section.settings.button_label != blank -%}
                              {{- section.settings.button_label | escape }}
                            {%- else -%}
                              {{ 'templates.contact.form.send' | t }}
                            {%- endif -%}
                          </button>
                        </div>
                      {%- endform -%}
                    </div>
                    {% if block.settings.show_contact_information %}
                      <div class="contact-infomation {{ class_infomation }}">
                        {%- if block.settings.heading_information != blank -%}
                          <h2 class="text-large leading-tight">
                            {{ block.settings.heading_information | escape }}
                          </h2>
                        {%- endif -%}
                        {% if block.settings.subheading != blank %}
                          <div class="rte mt-3 font-normal">
                            {{ block.settings.subheading }}
                          </div>
                        {% endif %}
                        <ul class="flex gap-y-6 flex-col{% if block.settings.heading != blank %} mt-4{% endif %} pb-9 font-normal">
                          {% if block.settings.store_address != blank %}
                            <li class="rte relative flex items-center">
                              <span class="w-5 mr-4 absolute top-1/2 left-0 -translate-y-1/2">{%- render 'icon-alls', icon: 'icon-location' -%}</span>
                              <span class="pl-8 pt-0.5">{{ block.settings.store_address }}</span>
                            </li>
                          {% endif %}
                          {% if block.settings.phone_nummber != blank %}
                            <li class="rte relative flex items-center">
                              <span class="w-5 mr-4 absolute top-1/2 left-0 -translate-y-1/2">{%- render 'icon-alls', icon: 'icon-phone' -%}</span>
                              <span class="pl-8 pt-0.5">{{ block.settings.phone_nummber }}</span>
                            </li>
                          {% endif %}
                          {% if block.settings.email_address != blank %}
                            <li class="rte relative flex items-center">
                              <span class="w-5 mr-4 absolute top-1/2 left-0 -translate-y-1/2">{%- render 'icon-alls', icon: 'icon-email' -%}</span>
                              <span class="pl-8 pt-0.5">{{ block.settings.email_address }}</span>
                            </li>
                          {% endif %}
                        </ul>
                        {% if block.settings.contact_text != blank or block.settings.enable_social_icon %}
                          <div class="pt-6 border-t font-normal">
                            {% if block.settings.contact_text != blank %}
                              <div class="rte mb-3">
                                {{ block.settings.contact_text }}
                              </div>
                            {% endif %}
                            {% if block.settings.enable_social_icon %}
                              <ul class="-ml-4 -mr-3 flex flex-wrap">
                                {%- render 'social-icons' -%}
                              </ul>
                            {% endif %}
                          </div>
                        {% endif %}
                      </div>
                    {% endif %}
                  </div>
                </div>
              </li>
              <script src="{{ 'map.js' | asset_url }}" defer></script>
            {%- endif -%}
        {%- endcase -%}
      {%- endfor -%}
    {%- endif -%}
  </ul>
</nav>